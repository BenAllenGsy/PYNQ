

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction to Overlays &mdash; Python productivity for Zynq (Pynq) v1.0</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Python productivity for Zynq (Pynq) v1.0" href="index.html"/>
        <link rel="next" title="IO Processor Architecture" href="7_iop_architecture.html"/>
        <link rel="prev" title="Programming PYNQ-Z1’s onboard peripherals" href="5_programming_onboard.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Python productivity for Zynq (Pynq)
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="1_getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_pynq.html">PYNQ Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_jupyter_notebook.html">Jupyter Notebook Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_programming_python.html">Cortex-A9 programming in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_programming_onboard.html">Programming PYNQ-Z1&#8217;s onboard peripherals</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction to Overlays</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overlay-concept">Overlay Concept</a></li>
<li class="toctree-l2"><a class="reference internal" href="#base-overlay">Base Overlay</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pmod-peripherals">Pmod Peripherals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pmod-port">Pmod Port</a></li>
<li class="toctree-l3"><a class="reference internal" href="#supported-peripherals">Supported Peripherals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pynq-grove-adapter">PYNQ Grove Adapter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#arduino-peripherals">Arduino Peripherals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#arduino-connector">Arduino Connector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">Supported Peripherals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pynq-shield">PYNQ Shield</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="7_iop_architecture.html">IO Processor Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="8_iop_code.html">IO Processors: Writing Your Own Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="9a_base_overlay_iop.html">Using Peripherals with the Base overlay</a></li>
<li class="toctree-l1"><a class="reference internal" href="9b_base_overlay_video.html">Video using the Base Overlay</a></li>
<li class="toctree-l1"><a class="reference internal" href="9c_base_overlay_audio.html">Audio using the Base Overlay</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_creating_overlays.html">Creating Overlays</a></li>
<li class="toctree-l1"><a class="reference internal" href="11_python_package.html"><code class="docutils literal"><span class="pre">pynq</span></code> Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="12_verification.html">Verification</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html"><code class="docutils literal"><span class="pre">pynq</span></code> package reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="14_faqs.html">Frequently Asked Questions (FAQs)</a></li>
<li class="toctree-l1"><a class="reference internal" href="15_glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="16_references.html">Useful Reference Links</a></li>
<li class="toctree-l1"><a class="reference internal" href="17_appendix.html">Appendix</a></li>
<li class="toctree-l1"><a class="reference internal" href="18_changelog.html">Documentation Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Python productivity for Zynq (Pynq)</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Introduction to Overlays</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/6_overlays.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput > div,
div.nbinput div[class^=highlight],
div.nbinput div[class^=highlight] pre,
div.nboutput,
div.nboutput > div,
div.nboutput div[class^=highlight],
div.nboutput div[class^=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput > :first-child pre {
    color: navy;
}

/* output prompt */
div.nboutput > :first-child pre {
    color: darkred;
}

/* all prompts */
div.nbinput > :first-child[class^=highlight],
div.nboutput > :first-child[class^=highlight],
div.nboutput > :first-child {
    min-width: 11ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}

/* input/output area */
div.nbinput > :nth-child(2)[class^=highlight],
div.nboutput > :nth-child(2),
div.nboutput > :nth-child(2)[class^=highlight] {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
}

/* input area */
div.nbinput > :nth-child(2)[class^=highlight] {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput  > :nth-child(2).stderr {
    background: #fdd;
}

/* ANSI colors */
.ansiblack { color: black; }
.ansired { color: darkred; }
.ansigreen { color: darkgreen; }
.ansiyellow { color: #c4a000; }
.ansiblue { color: darkblue; }
.ansipurple { color: darkviolet; }
.ansicyan { color: steelblue; }
/* See https://github.com/jupyter/nbconvert/issues/174 */
.ansigray { color: gray; }  /* nbconvert CSS */
.ansigrey { color: gray; }  /* nbconvert HTML output */

.ansibgblack { background-color: black; }
.ansibgred { background-color: red; }
.ansibggreen { background-color: green; }
.ansibgyellow { background-color: yellow; }
.ansibgblue { background-color: blue; }
.ansibgpurple { background-color: magenta; }
.ansibgcyan { background-color: cyan; }
.ansibggray { background-color: gray; }

.ansibold { font-weight: bold; }
</style>
<div class="section" id="introduction-to-overlays">
<h1>Introduction to Overlays<a class="headerlink" href="#introduction-to-overlays" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overlay-concept">
<h2>Overlay Concept<a class="headerlink" href="#overlay-concept" title="Permalink to this headline">¶</a></h2>
<p>The Xilinx® Zynq® All Programmable device is an SOC based on a dual-core ARM® Cortex®-A9 processor (referred to as the  <em>Processing System</em> or <strong>PS</strong>), which also includes FPGA fabric (referred to as  <em>Programmable Logic</em> or <strong>PL</strong>). The ARM SoC subsystem also includes a number of dedicated peripherals (memory controllers, USB, Uart, IIC, SPI etc).</p>
<img alt="_images/zynq_block_diagram.jpg" class="align-center" src="_images/zynq_block_diagram.jpg" />
<p>The FPGA fabric is reconfigurable, and can be used to implement high performance functions in hardware. However, FPGA design is a specialized task which requires deep hardware engineering knowledge and expertise.
Overlays, or hardware libraries, are programmable/configurable FPGA designs that extend the user application from the Processing System of the Zynq into the Programmable Logic. This allows software programmers to take advantage of the FPGA fabric to accelerate an application, or to use an overlay to customize the hardware platform for a particular application.</p>
<p>For example, image processing is a typical application where the FPGAs can provide acceleration. A software programmer can use a hardware library to run some of the image processing functions (e.g. edge detect, thresholding etc.) on the FPGA fabric.
Hardware libraries can be loaded to the FPGA dynamically, as required, just like a software library.
Using Pynq, separate image processing functions could be implemented in different overlays and loaded from Python on demand.</p>
<p>To give another example, the PYNQ-Z1 has more pins/interfaces available than a typical embedded platform, and can implement multiple custom processors in the Programmable logic.
Multiple sensor and actuator controllers, and multiple heterogeneous custom processors (real-time or non real-time), could be implemented in hardware in the new overlay, and connected to the available pins. A software programmer could use the controllers and processors in the overlay through a Pynq API.</p>
</div>
<div class="section" id="base-overlay">
<h2>Base Overlay<a class="headerlink" href="#base-overlay" title="Permalink to this headline">¶</a></h2>
<p>The base overlay is a precompiled FPGA design that can be downloaded to the Programmable Logic. It is the default overlay included with the PYNQ-Z1 image, and is automatically loaded when the system boots.</p>
<p>This overlay customizes the Programmable Logic to connect HDMI In and Out controllers, an audio controller (Mic In and Audio Out), and the Pmod and Arduino interfaces (through the IO Processors) to the PS. This allows the peripherals to be used from the Pynq environment. There is also a tracebuffer connected to the Pmod, and Arduino interfaces to allow for hardware debug. The user buttons, switches and LEDs are also connected to the PS in the base overlay.</p>
<img alt="_images/pynqz1_base_overlay.png" class="align-center" src="_images/pynqz1_base_overlay.png" />
<p>The Pmod and Arduino interfaces have special custom IO Processors  that allow a range of peripherals with different IO standards to be connected to the system. This allows a software programmer to use a wide range of peripherals with different interfaces and protocols without needing to create a new FPGA design for each peripheral or set of peripherals.</p>
</div>
<div class="section" id="pmod-peripherals">
<h2>Pmod Peripherals<a class="headerlink" href="#pmod-peripherals" title="Permalink to this headline">¶</a></h2>
<p>A Pmod interface is a 12-pin connector that can be used to connect peripherals. A range of Pmod peripherals are available from Digilent and third parties. Typical Pmod peripherals include sensors (voltage, light, temperature), communication interfaces (Ethernet, serial, wifi, bluetooth), and input and output interfaces (buttons, switches, LEDs).</p>
<p>There are two Pmod connectors on PYNQ-Z1.</p>
<img alt="_images/pynqz1_pmod_interface.jpg" class="align-center" src="_images/pynqz1_pmod_interface.jpg" />
<div class="section" id="pmod-port">
<h3>Pmod Port<a class="headerlink" href="#pmod-port" title="Permalink to this headline">¶</a></h3>
<p>Each Pmod connector has 12 pins: 2 rows of 6 pins, where each row has 3.3V (VCC), ground (GND) and 4 data pins. This gives 8 data pins in total. Pmod data pins are labelled 0-7 in the image below. The pin number needs to be specified in Python when creating a new instance of a peripheral connected to a port.</p>
<img alt="_images/pmod_closeup.JPG" class="align-center" src="_images/pmod_closeup.JPG" />
<p>Pmods come in different configurations depending on the number of data pins required. e.g. Full single row: 1x6 pins; full double row: 2x6 pins; and partially populated: 2x4 pins.</p>
<img alt="_images/pmod_pins.png" class="align-center" src="_images/pmod_pins.png" />
<p>Pmods that use both rows (e.g. 2x4 pins, 2x6 pins), should usually be aligned to the left of the connector (to align with VCC and GND).</p>
<img alt="_images/pmod_tmp2_8pin.JPG" src="_images/pmod_tmp2_8pin.JPG" />
<p>Pmod peripherals with only a single row of pins can be physically plugged into the top row or the bottom row of a Pmod port (again, aligned to VCC/GND). However, if you are using an existing driver/overlay, you will need to check which pins/rows are supported for a given overlay, as not all options may be implemented. e.g. the Pmod ALS is currently only supported on the top row of a Pmod port, not the bottom row.</p>
</div>
<div class="section" id="supported-peripherals">
<h3>Supported Peripherals<a class="headerlink" href="#supported-peripherals" title="Permalink to this headline">¶</a></h3>
<p>A number of peripherals are supported:</p>
<blockquote>
<div><ul class="simple">
<li>Pmods can be plugged directly into the Pmod port.</li>
<li>Grove peripherals can be connected to the Pmod port through a <em>PYNQ Grove Adapter</em>.</li>
<li>Other peripherals can be wired to a Pmod port.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="pynq-grove-adapter">
<h3>PYNQ Grove Adapter<a class="headerlink" href="#pynq-grove-adapter" title="Permalink to this headline">¶</a></h3>
<p>A Grove connector has four pins, VCC and GND, and two data pins.</p>
<p>The PYNQ Grove Adapter has four connectors (G1 - G4), allowing four Grove devices to be connected to one Pmod port.</p>
<img alt="_images/pmod_grove_adapter.jpg" class="align-center" src="_images/pmod_grove_adapter.jpg" />
<p>All pins operate at 3.3V. Due to different pull-up/pull-down I/O requirements for different peripherals (e.g. IIC requires pull-up, and SPI requires pull-down), Grove peripherals must be plugged into the appropriate connector.</p>
<p>G1 and G2 pins are connected to pins with pull-down resistors, and G3 and G4 are connected to pins with pull-up resistors (IIC), as indicated in the image.</p>
<img alt="_images/adapter_mapping.JPG" class="align-center" src="_images/adapter_mapping.JPG" />
<p>Pmods already take this pull up/down convention into account in their pin layout, so no special attention is required to connect Pmods.</p>
</div>
</div>
<div class="section" id="arduino-peripherals">
<h2>Arduino Peripherals<a class="headerlink" href="#arduino-peripherals" title="Permalink to this headline">¶</a></h2>
<p>There is one Arduino connector on the board and can be used to connect to arduino compatible shields.</p>
<img alt="_images/pynqz1_arduino_interface.jpg" class="align-center" src="_images/pynqz1_arduino_interface.jpg" />
<div class="section" id="arduino-connector">
<h3>Arduino Connector<a class="headerlink" href="#arduino-connector" title="Permalink to this headline">¶</a></h3>
<p>Each Arduino connector has 6 analog pins (A0 - A5), 14 multi-purpose Digital pins (D0 - D13), 2 dedicated I2C pins (SCL, SDA), and 4 dedicated SPI pins.</p>
</div>
<div class="section" id="id1">
<h3>Supported Peripherals<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Most Arduino compatible shields can be used with the PYNQ-Z1 board. However, the PYNQ-Z1 board has a limited analog range, so not all Arduino analog shields are supported.</p>
</div>
<div class="section" id="pynq-shield">
<h3>PYNQ Shield<a class="headerlink" href="#pynq-shield" title="Permalink to this headline">¶</a></h3>
<p>As mentioned previously, each Grove connector has 4 pins. The PYNQ Shield has 12 Grove connectors for digital IO (I2C, UART, G1 - G7) and 4 Grove connectors for analog IO (A1 - A4).</p>
<img alt="_images/arduino_shield.jpg" class="align-center" src="_images/arduino_shield.jpg" />
<p>With the PYNQ shield jumper (JP1) set to 3.3V (as in the figure), all the pins operate at 3.3V.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="7_iop_architecture.html" class="btn btn-neutral float-right" title="IO Processor Architecture" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="5_programming_onboard.html" class="btn btn-neutral" title="Programming PYNQ-Z1’s onboard peripherals" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Xilinx.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>